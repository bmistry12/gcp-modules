# GCP Project Terraform Module

This Terraform module creates a new GCP project, either directly under an organization or under a folder if `use_folders` is set to true. This module also sets the billing account for the project and enables specified APIs.

## Usage Example

```hcl
module "project" {
  source            = "path/to/module"
  project           = "my-project"
  project_id        = "my-project-id"
  region            = "eu-central1"
  billing_project   = "my-billing-account"
  enabled_apis      = ["compute", "storage"]
  use_folders       = true
  folder_projects   = {
    "project1" = ["1234567890", "team1"],
    "project2" = ["0987654321", "team2"]
  }
  team              = "my-team"
  iam_policy        = data.template_file.iam.rendered
  organisation      = "my-organization"
}

data "template_file" "iam" {
  template = file("${path.module}/iam_policy.tpl")
  vars     = {
    project_owner = "user:my-email@my-company.com"
  }
}

```

## Input Variables

| Name              | Description                                                                                                                | Type   | Default | Required |
| ----------------- | -------------------------------------------------------------------------------------------------------------------------- | ------ | ------- | -------- |
| project           | The name of the project to be created.                                                                                      | string | -       | yes      |
| project_id        | The project ID of the project to be created. If it is not provided, it will be autogenerated.                               | string | ""      | no       |
| organisation      | The organization name where the project should be created.                                                                  | string | -       | yes      |
| billing_project   | The billing project that will be associated with the new project.                                                           | string | -       | yes      |
| region            | The region where resources will be deployed.                                                                                | string | "us-central1" | no |
| zone              | The zone where resources will be deployed.                                                                                  | string | "us-central1-a" | no |
| use_folders       | Whether to create a project under a folder or directly under the organization.                                              | bool   | false   | no       |
| team              | The name of the team to be associated with the project.                                                                     | string | -       | yes      |
| enabled_apis      | A list of APIs to be enabled in the project.                                                                                | list(string) | ["cloudbilling.googleapis.com", "cloudresourcemanager.googleapis.com"] | no |
| folder_projects   | A map of projects that will be created under a folder. If `use_folders` is `false`, this variable has no effect.          | map(list(string)) | {} | no |
| iam_policy        | The IAM policy to set for the project.                                                                                      | string | ""      | no       |


## Output Variables

| Name                 | Description                                                               |
| -------------------- | ------------------------------------------------------------------------- |
| project_id           | The ID of the created project.                                            |
| project         | The number of the created project.                                          |
| all_billing_projects | All potential billing projects.              |
| billing_project | Billing project assigned to project..              |
| folder_project_names          | The names of the folder where the project was created (if `use_folders` is `true`). |
| folder_project_ids            | The IDs of the folder where the project was created (if `use_folders` is `true`).  |
| organisation            | Organisation that the project lives under.  |
| region            | Region that the project lives in.  |
| zone            | Zone within the region that the project lives in.  |